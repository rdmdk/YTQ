const main=document.getElementById("main"),video=document.getElementById("video"),screen=document.getElementById("screen"),screen_up=screen.querySelector(".up"),latest=document.getElementById("latest"),subscriptions=document.getElementById("subscriptions"),favorites=document.getElementById("favorites"),all=document.getElementById("all"),saved=document.getElementById("saved"),saved_videos=saved.querySelector(".videos"),nav=document.getElementById("nav"),options=document.getElementById("options"),autoplays=document.querySelectorAll(".autoplay"),input=document.getElementById("input"),win=document.getElementById("window"),youtubekey="AIzaSyAfrBvS4cGHrdMcLQYCKqcfKELVCx3qadY";let channelid="";const opt=1;function hide_news(){const e=document.getElementById("news");e&&(e.classList.add("wait"),setTimeout(()=>e.parentElement.removeChild(e),1e3),sessionStorage.ytq_news="Seen it")}function clear_storage(e){e&&Object.entries(localStorage).map(e=>e[0]).filter(t=>t.substring(0,e.length)==e).map(e=>localStorage.removeItem(e))}function supernova(){clear_storage("ytq_"),setTimeout(()=>toggle.click(),1e3),setTimeout(()=>fadeOut(nav),2e3),setTimeout(()=>fadeOut(main),3e3),setTimeout(()=>window.location.reload(!0),4e3)}let touch;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?document.querySelector("html").classList.add("mobile"):document.querySelector("html").classList.add("desktop"),(localStorage.id||localStorage.favorites||localStorage.all||localStorage.saved||localStorage.playlists||localStorage.theme||localStorage.mode||localStorage.pin||localStorage.synced||localStorage.autoplay||localStorage.recent)&&update_storage(),localStorage.ytq_id||localStorage.ytq_all||(main.insertAdjacentHTML("beforeend",'<h2 id="new" class="h2 new wait" data-color><span class="span">New here?</span></h2>'),document.body.addEventListener("click",e=>{"new"===e.target.id&&(document.getElementById("toggle").click(),importingexporting("new"),setTimeout(()=>e.target.style.display="none",1e3))}),setTimeout(()=>document.getElementById("new").classList.remove("wait"),2e3)),opt>=1&&!sessionStorage.ytq_news&&localStorage.ytq_id&&!sessionStorage.ytq_vhs&&(main.insertAdjacentHTML("beforeend",'<h2 id="news" class="h2 new wait" data-color><span class="span">Check out VHS Mode!</span></h2>'),document.body.addEventListener("click",e=>{"news"===e.target.id&&(document.body.setAttribute("data-vhs",""),sessionStorage.ytq_vhs,hide_news())}),setTimeout(()=>document.getElementById("news").classList.remove("wait"),2e3)),localStorage.ytq_id&&(channelid=localStorage.ytq_id),localStorage.ytq_favorites&&(favorites.innerHTML=localStorage.ytq_favorites),localStorage.ytq_all&&(all.innerHTML=localStorage.ytq_all),localStorage.ytq_saved&&(saved.querySelector(".videos").innerHTML=localStorage.ytq_saved);const nav_mode=nav.querySelector(".mode");function list_em(e,t,s){e&&e.length&&t&&e.forEach(e=>{const a=document.createElement("img"),o=document.createElement("span"),n=document.createElement("span"),i=document.createElement("span"),l=document.createElement("li");let c;if(t.closest("#latest")||t.closest("#saved")){const t="upload"===s?e.snippet.resourceId.videoId:e.id.videoId;a.style.backgroundImage="url("+e.snippet.thumbnails.medium.url+")",o.setAttribute("data-id",t),o.setAttribute("data-channel",e.snippet.channelTitle.replace(/\'/gm,"&#39;")),o.setAttribute("data-channel-id",e.snippet.channelId),o.setAttribute("data-date",new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()),i.title=e.snippet.title.replace(/\'/gm,"&#39;").replace(/&#39;/gm,"&#39;").replace(/&amp;/gm,"&")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear(),i.innerHTML=e.snippet.title.replace(/\'/gm,"&#39;"),c='<span class="span handles"><span class="span save" title="Save" data-color><i class="fa fa-plus"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span>'}else t.closest("#subscriptions")&&(a.style.backgroundImage="url("+e.snippet.thumbnails.default.url+")",o.setAttribute("data-id",e.snippet.resourceId.channelId),i.title=e.snippet.title.replace(/\'/gm,"&#39;"),i.innerText=e.snippet.title.replace(/\'/gm,"&#39;"),c='<span class="span handles"><span class="span star" data-color=""><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star-o" aria-hidden="true"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span>');a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",a.className="img",n.classList="span image",i.classList="span title",o.classList="span listing",l.className="li",l.title=i.title,l.setAttribute("data-background",""),n.appendChild(a),o.appendChild(n),o.appendChild(i),l.appendChild(o),c&&l.insertAdjacentHTML("beforeend",c),-1===t.innerHTML.indexOf(o.getAttribute("data-id"))&&(t===all?-1===favorites.innerHTML.indexOf(o.getAttribute("data-id"))&&t.appendChild(l):t.appendChild(l))})}function getsubscriptions(){if(""!==channelid){"#debug"===window.location.hash&&console.log("Updating subscriptions");const e="https://www.googleapis.com/youtube/v3/subscriptions?part=snippet&channelId="+channelid+"&maxResults=50&key="+youtubekey,t=e+"&pageToken=";let s=[];fetch(e).then(e=>e.json()).then(e=>{let a=e.nextPageToken;e.items.forEach(e=>s.push(e));let o=setInterval(()=>{if(a)fetch(t+a).then(e=>e.json()).then(e=>{a=e.nextPageToken,e.items.forEach(e=>s.push(e))});else{let e;clearInterval(o),all.innerHTML="",setTimeout(()=>{(e=[...new Set(s)]).sort((e,t)=>e.snippet.title.localeCompare(t.snippet.title))},1e3),setTimeout(()=>list_em(e,all),2e3);let t=setInterval(()=>{e.length===all.querySelectorAll(".list .li").length&&(clearInterval(t),opt>=1&&(localStorage.ytq_all=all.innerHTML))},1e3)}},1e3)}).catch(e=>supernova())}}nav_mode.addEventListener("touchstart",()=>{touch=setTimeout(()=>supernova(),4e3)},!1),nav_mode.addEventListener("touchend",()=>clearTimeout(touch),!1),nav.querySelector(".refresh").addEventListener("touchstart",()=>{touch=setTimeout(()=>window.location.reload(!0),2e3)},!1),nav.querySelector(".refresh").addEventListener("touchend",()=>clearTimeout(touch),!1);const s1=Sortable.create(favorites,{group:".channels",handle:".drag",disabled:!0}),s2=Sortable.create(all,{group:".channels",handle:".drag",disabled:!0}),s3=Sortable.create(saved_videos,{group:".videos",handle:".drag",disabled:!0});function saved_reorder(){const e=video.classList.contains("pin")?saved.offsetTop-screen.scrollHeight:saved.offsetTop;let t;zenscroll.toY(e,500),saved.classList.toggle("edit"),setTimeout(()=>{t=!saved.classList.contains("edit"),s3.option("disabled",t)},100),setTimeout(()=>{opt>=1&&t&&(localStorage.ytq_saved=saved.querySelector(".videos").innerHTML)},200)}function sub_reorder(){const e=video.classList.contains("pin")?subscriptions.offsetTop-screen.scrollHeight:subscriptions.offsetTop;let t;zenscroll.toY(e,500),subscriptions.classList.toggle("edit"),setTimeout(()=>{t=!subscriptions.classList.contains("edit"),s1.option("disabled",t),s2.option("disabled",t)},100),setTimeout(()=>{opt>=1&&t&&(localStorage.ytq_favorites=favorites.innerHTML,localStorage.ytq_all=all.innerHTML)},200)}function az(e){let t=[];e.childNodes.forEach(e=>t.push(e)),e.innerHTML="",t.sort((e,t)=>e.title.localeCompare(t.title)),t.forEach(t=>e.appendChild(t))}function getlatest(e="search"){const t=subscriptions.querySelector(".active .listing").getAttribute("data-id"),s="search"===e?"https://www.googleapis.com/youtube/v3/search?&channelId="+t+"&part=snippet,id&order=date&maxResults=16&type=video&key="+youtubekey:"upload"===e?"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2C+id&playlistId="+t.replace(/UC/gm,"UU")+"&order=date&maxResults=16&key="+youtubekey:"";fetch(s).then(e=>e.json()).then(s=>{const a=latest.querySelector(".videos");a.innerHTML="",a.setAttribute("data-page",1),latest.querySelector(".youtube .a").setAttribute("href","https://www.youtube.com/channel/"+t),"upload"===e&&s.items.sort((e,t)=>new Date(t.snippet.publishedAt)-new Date(e.snippet.publishedAt)),list_em(s.items,latest.querySelector(".videos"),e),setactive()}).catch(e=>console.error(e))}function getlatest_related(){const e=subscriptions.querySelector(".active .listing"),t=subscriptions.querySelector('.listing[data-id="'+screen.getAttribute("data-channel-id")+'"]');e?e!==t&&(e.closest("li").classList.remove("active"),t.closest("li").classList.add("active"),getlatest("upload")):(t.closest("li").classList.add("active"),getlatest("upload"))}function loadvideo(){const e=document.querySelector(".videos .active .listing"),t=window.innerWidth>=600?"maxresdefault":"hqdefault",s=document.getElementById("hd");screen.setAttribute("data-id",e.getAttribute("data-id")),screen.setAttribute("data-channel-id",e.getAttribute("data-channel-id")),document.getElementById("img").style=e.querySelector(".image .img").getAttribute("style"),s.style=e.querySelector(".image .img").getAttribute("style").replace(/mqdefault/gm,t),s.style.opacity=null,document.getElementById("title").innerText=e.querySelector(".videos .active .listing .title").innerText,document.getElementById("channel").innerText=e.getAttribute("data-channel"),document.getElementById("channel").parentNode.setAttribute("href","https://www.youtube.com/channel/"+e.getAttribute("data-channel-id")),document.getElementById("date").innerText=e.getAttribute("data-date"),document.getElementById("youtube").querySelector(".a").setAttribute("href","https://www.youtube.com/channel/"+e.getAttribute("data-channel-id")),setTimeout(()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()},500),setTimeout(()=>s.style.opacity=1,1e3)}function playvideo(e=document.querySelector(".videos .playing .listing").getAttribute("data-id")){const t=screen.querySelector("iframe");t?t.parentNode.removeChild(t):(screen.querySelector(".inner").insertAdjacentHTML("afterbegin",'<div id="x"></div>'),new YT.Player("x",{videoId:e,playerVars:{autoplay:1,modestbranding:1,rel:0,playsinline:1,iv_load_policy:3,origin:"https://www.youtube.com"},events:{onStateChange:onPlayerStateChange}}))}function onPlayerStateChange(e){if(0===e.data){const e=screen.querySelector("iframe");e&&(fadeOut(e),setTimeout(()=>e.parentNode.removeChild(e),1e3));let t=setTimeout(()=>{if(document.querySelector(".autoplay").classList.contains("on")&&document.querySelector(".videos .playing").nextElementSibling){let e;document.querySelector(".videos .playing").closest(".latest")?e=latest:document.querySelector(".videos .playing").closest(".saved")&&(e=saved);const t=e.querySelector(".videos .playing").nextElementSibling,s=[...t.parentNode.children].indexOf(t),a=parseInt(latest.querySelector(".videos").getAttribute("data-page"));e.querySelector(".videos .playing").className="li",t.classList="li active playing",t.closest("#latest")&&(12===s&&3===a||8===s&&2===a||4===s&&1===a)&&latest.querySelector(".more").click(),setTimeout(()=>loadvideo(),500),setTimeout(()=>playvideo(document.querySelector(".videos .playing .listing").getAttribute("data-id")),1500)}},2e3);document.querySelectorAll(".videos li").forEach(e=>{e.addEventListener("click",()=>clearTimeout(t))})}console.log(e.data),document.body.classList.toggle("playing",1===e.data)}function enableautoplay(){autoplays.forEach(e=>{const t=(e.closest("#latest")?latest:saved).querySelectorAll(".videos .li").length>1?null:"none";e.style.display=t,opt>=1&&localStorage.ytq_autoplay&&(e.classList="li autoplay "+localStorage.ytq_autoplay)})}function setactive(){setTimeout(()=>{const e=screen.getAttribute("data-id");document.querySelectorAll(".videos .listing").forEach(t=>{const s=t.getAttribute("data-id");t.closest("li").classList.toggle("active",s===e)})})}opt>=1&&(localStorage.ytq_favorites||localStorage.ytq_all)?(new Date).getDay()%2?localStorage.ytq_recent||(getsubscriptions(),localStorage.ytq_recent="recent"):localStorage.ytq_recent&&localStorage.removeItem("ytq_recent"):(getsubscriptions(),opt>=1&&(localStorage.ytq_recent="recent")),document.querySelectorAll(".active").forEach(e=>e.classList="li"),screen.addEventListener("click",e=>{e.target===screen_up?zenscroll.toY(0,500):playvideo(document.querySelector(".videos .playing .listing").getAttribute("data-id"))}),autoplays.forEach(e=>{e.addEventListener("click",()=>{const t=e.classList.contains("off")?"on":"off";e.classList="li autoplay "+t,opt>=1&&(localStorage.ytq_autoplay=t),enableautoplay()})}),opt>=1&&localStorage.ytq_autoplay&&autoplays.forEach(e=>e.classList="li autoplay "+localStorage.ytq_autoplay);const options_li=options.querySelectorAll(".li");function updateoptions(){options_li.forEach(e=>{const t="ytq_"+e.classList[1];e.classList.toggle("hide",opt>=1&&!localStorage.getItem(t))})}function importingexporting(e){const t=win.getAttribute("data-page"),s="IDs or URLs";t!==e?(fadeOut(win,500),setTimeout(()=>{win.setAttribute("data-page",e),options_li.forEach(e=>e.classList.remove("active")),input.value="",input.placeholder="new"===e?"":s,fadeIn(win,500)},1e3)):(input.placeholder="new"===e?"":s,fadeToggle(win,500)),updateoptions()}function importurls(e){let t=[],s=[];e.split(",").forEach(e=>{const a=e.includes("&list=WL")?e.replace(/.*?\?v=|&list=WL.*?$/gm,""):e.includes("&list")?e.replace(/.*?&list=|\&.*?$/gm,""):e.includes("&")?e.replace(/\&.*?$/gm,""):e.replace(/.*?=|.*?\//gm,"");if(!saved.querySelector(".videos").innerHTML.includes(a))if(a.startsWith("PL")){const e="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2C+id&playlistId="+a+"&maxResults=50&key="+youtubekey;fetch(e).then(e=>e.json()).then(o=>{let n=o.nextPageToken;const i=e+"&pageToken=";opt>=1&&!localStorage.ytq_playlists?localStorage.ytq_playlists=a:opt>=1&&!localStorage.ytq_playlists.includes(a)&&(localStorage.ytq_playlists+=","+a),"#debug"===window.location.hash&&(console.log("Items:"),console.log(o.items)),o.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)||t.push(e)});let l=setInterval(()=>{if(n)fetch(i+n).then(e=>e.json()).then(e=>{n=e.nextPageToken,e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)||t.push(e)})});else clearInterval(l),s=[...new Set(t)],"#debug"===window.location.hash&&(console.log("List:"),console.log(t),console.log("New list:"),console.log(s)),setTimeout(()=>{s.forEach((e,t)=>{setTimeout(()=>{if(!saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)){const t="https://www.googleapis.com/youtube/v3/videos?part=snippet%2C+id&id="+e.snippet.resourceId.videoId+"&key="+youtubekey;fetch(t).then(e=>e.json()).then(e=>{e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.id)||saved.querySelector(".videos").insertAdjacentHTML("beforeend",'<li class="li" title="'+e.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-background><span class="span listing" data-id="'+e.id+'" data-date="'+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-channel="'+e.snippet.channelTitle.replace(/\'/gm,"&#39;")+'" data-channel-id="'+e.snippet.channelId+'"><span class="span image"><img class="img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="background-image:url('+e.snippet.thumbnails.medium.url+'"></span><span class="span title">'+e.snippet.title.replace(/\'/gm,"&#39;")+'</span></span><span class="span handles"><span class="span save" title="Save" data-color><i class="fa fa-plus"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span></li>')})}).catch(e=>console.error(e))}},10*t)});const e=localStorage.ytq_playlists&&""!==localStorage.ytq_playlists?null:"none";saved.querySelector(".sync").style.display=e,setTimeout(()=>{enableautoplay(),enablereorder()},500)},1e3)},1e3)}).catch(e=>console.error(e))}else{fetch("https://www.googleapis.com/youtube/v3/videos?part=snippet%2C+id&id="+a+"&key="+youtubekey).then(e=>e.json()).then(e=>{"#debug"===window.location.hash&&(console.log("Items:"),console.log(e.items)),e.items.forEach(e=>{saved_videos.innerHTML.includes(e.id)||saved_videos.insertAdjacentHTML("beforeend",'<li class="li" title="'+e.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-background><span class="span listing" data-id="'+e.id+'" data-date="'+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-channel="'+e.snippet.channelTitle.replace(/\'/gm,"&#39;")+'" data-channel-id="'+e.snippet.channelId+'"><span class="span image"><img class="img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="background-image:url('+e.snippet.thumbnails.medium.url+')"></span><span class="span title">'+e.snippet.title.replace(/\'/gm,"&#39;")+'</span></span><span class="span handles"><span class="span save" title="Save" data-color><i class="fa fa-plus"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span></li>')}),setTimeout(()=>{enableautoplay(),enablereorder()},500)}).catch(e=>console.error(e))}}),setTimeout(()=>{localStorage.ytq_saved=saved.querySelector(".videos").innerHTML},4e3)}if(saved.querySelector(".sync").addEventListener("click",()=>{const e=saved.querySelector(".sync"),t=e.classList.contains("off")?"on":"off";e.classList="li sync "+t,opt>=1&&(localStorage.ytq_synced=t,"off"===localStorage.ytq_synced&&(localStorage.ytq_playlists=""))}),opt>=1&&localStorage.ytq_playlists){const e=localStorage.ytq_synced&&"on"===localStorage.ytq_synced?"on":"off";saved.querySelector(".sync").classList="li sync "+e}else saved.querySelector(".sync").style.display="none";function importbundle(e){let t,s,a,o,n,i,l;e.indexOf("##id##")>-1&&(t=/##id##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##favorites##")>-1&&(s=/##favorites##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##all##")>-1&&(a=/##all##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##saved##")>-1&&(o=/##saved##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##playlists##")>-1&&(bundleplaylists=/##playlists##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##theme##")>-1&&(n=/##theme##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##mode##")>-1&&(i=/##time##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##pin##")>-1&&(l=/##pin##(.*?)(?=##|$)/gm.exec(e)),setTimeout(()=>{opt>=1&&(t&&""!==t[1]&&void 0!==t[1]&&(localStorage.ytq_id=t[1]),s&&""!==s[1]&&void 0!==s[1]&&(localStorage.ytq_favorites=s[1]),a&&""!==a[1]&&void 0!==a[1]&&(localStorage.ytq_all=a[1]),o&&""!==o[1]&&void 0!==o[1]&&(localStorage.ytq_saved=o[1]),bundleplaylists&&""!==bundleplaylists[1]&&void 0!==bundleplaylists[1]&&(localStorage.ytq_playlists=bundleplaylists[1]),n&&""!==n[1]&&void 0!==n[1]&&(localStorage.ytq_theme=n[1]),i&&""!==i[1]&&void 0!==i[1]&&(localStorage.ytq_mode=i[1]),l&&""!==l[1]&&void 0!==l[1]&&(localStorage.ytq_pin=l[1]))},500)}function exitnav(e){setTimeout(()=>fadeOut(win),e),setTimeout(()=>toggle.click(),1e3+e),setTimeout(()=>input.value="",2e3+e)}function pinz(){const e=nav.querySelector(".pin .span");e.classList.toggle("p"),opt>=1&&(localStorage.ytq_pin=e.classList.contains("p")?"pin":""),pinned(e)}function pinned(e=nav.querySelector(".pin .span")){"pin"===localStorage.ytq_pin?(e.classList.add("p"),window.innerWidth>=600&&window.scrollY>screen.offsetTop+screen.scrollHeight?video.classList.add("pin"):window.innerWidth<600?video.classList.add("pin"):video.classList.remove("pin")):video.classList.remove("pin");const t=e.classList.contains("p")?"Unpin":"Pin";e.title=t}options_li.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active"),setTimeout(()=>{let e="";opt>=1&&(options.querySelector(".id").classList.contains("active")&&(e+="##id##"+localStorage.ytq_id),options.querySelector(".favorites").classList.contains("active")&&(e+="##favorites##"+localStorage.ytq_favorites),options.querySelector(".all").classList.contains("active")&&(e+="##all##"+localStorage.ytq_all),options.querySelector(".saved").classList.contains("active")&&(e+="##saved##"+localStorage.ytq_saved),options.querySelector(".playlists").classList.contains("active")&&(e+="##playlists##"+localStorage.ytq_playlists),options.querySelector(".theme").classList.contains("active")&&(e+="##theme##"+localStorage.ytq_theme),options.querySelector(".mode").classList.contains("active")&&(e+="##mode##"+localStorage.ytq_mode),options.querySelector(".pin").classList.contains("active")&&(e+="##pin##"+localStorage.ytq_pin)),input.value=e},10)})}),input.addEventListener("click",()=>{"export"===win.getAttribute("data-page")&&input.select()}),document.getElementById("button").addEventListener("click",()=>{const e=input.value;""!==e&&("new"===win.getAttribute("data-page")?(e.startsWith("http")?importurls(e):e.startsWith("##")?importbundle(e):opt>=1&&(localStorage.ytq_id="redmond"===e?"UCqMnpO2ok_usDfeoTm36EGA":"victoria"===e?"UCHPVh0gqxn5IO3geNxI6uxQ":"charlie"===e?"UCb2CJSF7SNz55COAHQ3-dBQ":e),exitnav(1e3),setTimeout(()=>fadeOut(nav),3e3),setTimeout(()=>fadeOut(main),4e3),setTimeout(()=>window.location.reload(),5e3)):"import"===win.getAttribute("data-page")&&(importurls(e),exitnav(1e3)))}),document.getElementById("exit").addEventListener("click",()=>exitnav()),pinned(),window.addEventListener("scroll",()=>pinned()),window.addEventListener("resize",()=>pinned());const os=window.navigator.userAgent.includes("iP")?"ios":window.navigator.userAgent.includes("Android")?"android":window.navigator.platform.includes("Mac")?"mac":"",hs=!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches;function addto(){let e="mac"===os?"Add to Dock":"Add to Start Menu",t='<li class="li"><button class="button add" data-background>Download</button></li><li class="li">Navigate to chrome://extensions</li><li class="li">Toggle Developer Mode on</li><li class="li">Drag the CRX file into Extensions</li>';if("ios"!==os&&"android"!==os||(e="Add to Home Screen",t="ios"===os?'<li class="li">Tap the <i class="fa fa-sign-out"></i> icon in Safari</li><li class="li">Add to Home Screen</li>':'<li class="li">Tap the <i class="fa fa-ellipsis-v"></i> icon in Chrome</li><li class="li">Add to Home Screen</li>'),win.querySelector(".h2.add").innerHTML=e,win.querySelector(".ul.add").innerHTML=t,"add"===win.getAttribute("data-page"))fadeOut(win,500),setTimeout(()=>{const e=win.querySelector(".button.add");e&&e.addEventListener("click",()=>get_crx()),win.setAttribute("data-page","add"),fadeIn(win,500)},500);else{const e=win.querySelector(".button.add");e&&e.addEventListener("click",()=>get_crx()),win.setAttribute("data-page","add"),fadeIn(win,500)}}function get_crx(){window.alert("We're sorry! The YTQ app is no longer available")}hs&&document.body.setAttribute("data-standalone",""),localStorage.ytq_crx?(document.body.setAttribute("data-crx",""),document.documentElement.setAttribute("oncontextmenu","return false")):"#crx"===window.location.hash&&(localStorage.ytq_crx=!0,window.location.href="/ytq",window.location.reload()),document.getElementById("toggle").addEventListener("click",()=>{const e=win.scrollHeight>0?500:0;setTimeout(()=>nav.classList.toggle("active"),e),win.scrollHeight>0&&fadeOut(win,500)});const navs=nav.querySelectorAll(".ul .li");navs.forEach(e=>{e.addEventListener("click",t=>{if(e.classList.contains("import"))importingexporting("import");else if(e.classList.contains("export"))importingexporting("export");else if(e.classList.contains("refresh"))t.shiftKey?window.location.reload(!0):(opt>=1&&localStorage.ytq_playlists&&saved.querySelector(".sync").classList.contains("on")&&importurls(localStorage.ytq_playlists),"block"===all.style.display&&getsubscriptions());else if(e.classList.contains("theme"))themez(t);else if(e.classList.contains("mode"))if(t.shiftKey){if(!window.confirm("Are you sure you want to trigger a supernova? This will reset everything!"))return;supernova()}else t.altKey?window.location="/ytl":modez();else e.classList.contains("pin")?pinz():e.classList.contains("add")&&addto()})}),win.querySelector(".fade").addEventListener("click",()=>exitnav());const h2s=document.querySelectorAll("h2 .title");h2s.forEach(e=>{e.addEventListener("click",()=>{if(!document.getElementById("new")){const t=e.closest(".h2"),s=t.nextElementSibling;t.classList.toggle("expanded"),setTimeout(()=>{t.classList.contains("expanded")?(e.closest(".latest")&&!subscriptions.querySelector(".channels .active")?(setTimeout(()=>{const e=favorites.querySelector(".li")?favorites:all,a=Math.floor(Math.random()*e.querySelectorAll(".li").length);e.querySelectorAll(".li")[a].click(),t.querySelector(".arrow .fa").classList="fa fa-angle-up",slideDown(s)},1e3),setTimeout(()=>enableautoplay(),2e3)):(t.querySelector(".arrow .fa").classList="fa fa-angle-up",slideDown(s),enableautoplay()),document.getElementById("news")&&hide_news()):(t.querySelector(".arrow .fa").classList="fa fa-angle-down",slideUp(s)),e.closest(".subscriptions")&&setTimeout(()=>{"none"===s.style.display&&(all.style="")},600)})}})});const menus=document.querySelectorAll(".menu .li");function enablereorder(){const e=saved_videos.children.length>1?"block":"none";saved.querySelector(".reorder").style.display=e}function themez(e){let t,s;const a=document.body.classList;t=a.contains("a")?"a":a.contains("b")?"b":a.contains("c")?"c":a.contains("d")?"d":a.contains("e")?"e":a.contains("f")?"f":a.contains("g")?"g":a.contains("h")?"h":a.contains("i")?"i":a.contains("j")?"j":a.contains("k")?"k":a.contains("l")?"l":a.contains("m")?"m":a.contains("n")?"n":a.contains("o")?"o":a.contains("p")?"p":a.contains("q")?"q":a.contains("r")?"r":a.contains("s")?"s":a.contains("aa")?"aa":"bb",s=a.contains("a")?"b":a.contains("b")?"c":a.contains("c")?"d":a.contains("d")?"e":a.contains("e")?"f":a.contains("f")?"g":a.contains("g")?"h":a.contains("h")?"i":a.contains("i")?"j":a.contains("j")?"k":a.contains("k")?"l":a.contains("l")?"m":a.contains("m")?"n":a.contains("n")?"o":a.contains("o")?"p":a.contains("p")?"q":a.contains("q")?"r":a.contains("r")?"s":a.contains("s")?"aa":a.contains("aa")?"bb":"a",document.body.classList.remove(t),document.body.classList.add(s),opt>=1&&(localStorage.ytq_theme=s)}function recalltheme(){const e=opt>=1&&localStorage.ytq_mode?localStorage.ytq_mode:"day",t=opt>=1&&localStorage.ytq_theme?localStorage.ytq_theme:"aa",s="night"===e?"#000000":"#ffffff";document.body.classList="body "+e+" "+t,document.head.querySelector('meta[name="theme-color"').content=s}function modez(){const e=document.body.classList.contains("day")?"day":"night",t="day"===e?"night":"day",s="day"===t?"#ffffff":"#000000";document.body.classList.remove(e),document.body.classList.add(t),document.head.querySelector('meta[name="theme-color"').content=s,opt>=1&&(localStorage.ytq_mode=t)}function newsize(){const e=document.querySelector("#info .h1").scrollHeight,t=document.querySelector("#info .channel").scrollHeight>=document.querySelector("#info .date").scrollHeight?document.querySelector("#info .channel").scrollHeight:document.querySelector("#info .date").scrollHeight;document.getElementById("info").style.height=e+t+"px"}let resizing;function parent_links(){document.querySelectorAll("a[target]:not([data-updated])").forEach(e=>{e.target=e.href.includes(window.location.host)?"_self":null!==localStorage.getItem("rdmdk_crx")?"_blank":"_top",e.setAttribute("data-updated","")}),document.body.parentNode.setAttribute("data-iframe","")}menus.forEach(e=>{e.addEventListener("click",()=>{if(e.closest(".latest")){if(e.classList.contains("more")){const e=parseInt(latest.querySelector(".videos").getAttribute("data-page"))+1;latest.querySelector(".videos").setAttribute("data-page",e)}}else e.closest(".subscriptions")?e.classList.contains("more")?slideDown(all,500):e.classList.contains("reorder")?sub_reorder():e.classList.contains("refresh")?getsubscriptions():e.classList.contains("sort")&&(favorites.children.length&&az(favorites),all.children.length&&az(all)):e.closest(".saved")&&(e.classList.contains("reorder")?saved_reorder():e.classList.contains("sort")&&saved_videos.children.length&&az(saved_videos))})}),enablereorder(),document.body.addEventListener("click",e=>{const t=e.target;if("li"===t.localName){if(t.closest(".saved.edit"))return;if(t.closest(".videos"))if(t.classList.contains("active")){if(t.classList.contains("playing"))return;document.querySelector(".playing")&&(document.querySelector(".playing").classList.remove("playing"),t.classList.add("playing"))}else{if(video.querySelector(".screen iframe")){if(!window.confirm("Stop current video?"))return;{const e=video.querySelector(".screen iframe");e.parentNode.removeChild(e),document.querySelector(".videos .active")&&document.querySelectorAll(".videos .active").forEach(e=>e.classList="li"),t.classList="li active playing",loadvideo(),setactive(),t.closest(".saved")&&getlatest_related()}}else document.querySelector(".videos .active")&&document.querySelectorAll(".videos .active").forEach(e=>e.classList="li"),t.classList="li active playing",loadvideo(),setactive(),t.closest(".saved")&&getlatest_related(),0===video.scrollHeight&&(slideDown(video),setTimeout(()=>{opt>=1&&localStorage.ytq_pin&&"pin"===localStorage.ytq_pin&&window.innerWidth<600&&video.classList.add("pin")},500));video.classList.contains("pin")||zenscroll.toY(0,500)}else if(t.closest(".channels")&&!subscriptions.classList.contains("edit")){if(t.classList.contains("active"))return;document.querySelector(".channels .active")&&(document.querySelector(".channels .active").classList="li"),t.classList.add("active"),getlatest(),setTimeout(()=>{if(0===latest.querySelector(".videos").scrollHeight&&latest.querySelector(".h2 .title").click(),window.innerWidth<600){const e=video.classList.contains("pin")?latest.offsetTop-screen.scrollHeight:latest.offsetTop;zenscroll.toY(e,500)}},250),setTimeout(()=>enableautoplay(),750)}}else if("span"===t.localName)if(t.classList.contains("save")){if(t.closest(".latest")){if(saved.querySelector(".videos").innerHTML.includes(t.parentNode.previousElementSibling.getAttribute("data-id")))return;t.title="Remove",saved.querySelector(".videos").insertAdjacentHTML("beforeend",t.closest(".li").outerHTML),setTimeout(()=>t.title="Save")}else{const e=t.closest(".li");e.parentNode.removeChild(e)}enableautoplay(),enablereorder(),setTimeout(()=>localStorage.ytq_saved=saved.querySelector(".videos").innerHTML,500)}else if(t.classList.contains("star")){const e=t.closest(".li");(t.closest(".favorites")?all:favorites).insertAdjacentHTML("beforeend",e.outerHTML),e.parentNode.removeChild(e)}}),recalltheme(),sessionStorage.ytq_vhs?document.body.setAttribute("data-vhs",""):"#vhs"===window.location.hash&&(document.body.setAttribute("data-vhs",""),sessionStorage.ytq_vhs="vhs"),window.addEventListener("resize",()=>{clearTimeout(resizing),resizing=setTimeout(()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()},1e3)}),window.addEventListener("scroll",()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()}),window.self!==window.top&&parent_links();
