var main=document.getElementById("main"),video=document.getElementById("video"),screen=document.getElementById("screen"),latest=document.getElementById("latest"),subscriptions=document.getElementById("subscriptions"),favorites=document.getElementById("favorites"),all=document.getElementById("all"),saved=document.getElementById("saved"),saved_videos=saved.querySelector(".videos"),nav=document.getElementById("nav"),prefs=document.getElementById("preferences"),options=document.getElementById("options"),autoplays=document.querySelectorAll(".autoplay"),input=document.getElementById("input"),win=document.getElementById("window"),youtubekey="AIzaSyAfrBvS4cGHrdMcLQYCKqcfKELVCx3qadY",channelid="",opt_n=1;function clear_storage(e){e&&Object.entries(localStorage).map(e=>e[0]).filter(t=>t.substring(0,e.length)==e).map(e=>localStorage.removeItem(e))}function supernova(){clear_storage("ytq_"),setTimeout(()=>toggle.click(),1e3),setTimeout(()=>fadeOut(nav),2e3),setTimeout(()=>fadeOut(main),3e3),setTimeout(()=>window.location.reload(!0),4e3)}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?document.querySelector("html").classList.add("mobile"):document.querySelector("html").classList.add("desktop"),(localStorage.id||localStorage.favorites||localStorage.all||localStorage.saved||localStorage.playlists||localStorage.theme||localStorage.mode||localStorage.pin||localStorage.synced||localStorage.autoplay||localStorage.recent)&&update_storage(),localStorage.ytq_id||localStorage.ytq_all||(main.insertAdjacentHTML("beforeend",'<h2 id="new" class="h2 new wait" data-color><span class="span">New here?</span></h2>'),document.body.addEventListener("click",e=>{"new"===e.target.id&&(document.getElementById("toggle").click(),importingexporting("new"),setTimeout(()=>e.target.style.display="none",1e3))}),setTimeout(()=>document.getElementById("new").classList.remove("wait"),2e3)),opt_n>=1&&!localStorage.ytq_news&&!sessionStorage.news&&localStorage.ytq_id&&(main.insertAdjacentHTML("beforeend",'<h2 id="news" class="h2 new wait" data-color><span class="span">Saved videos can now be sorted!</span></h2>'),document.body.addEventListener("click",e=>{"news"===e.target.id&&(localStorage.ytq_news="Seen it")}),setTimeout(()=>document.getElementById("news").classList.remove("wait"),2e3)),localStorage.ytq_id&&(channelid=localStorage.ytq_id),localStorage.ytq_favorites&&(favorites.innerHTML=localStorage.ytq_favorites),localStorage.ytq_all&&(all.innerHTML=localStorage.ytq_all),localStorage.ytq_saved&&(saved.querySelector(".videos").innerHTML=localStorage.ytq_saved);var nav_mode=nav.querySelector(".mode");function list_em(e,t,a){e&&e.length&&t&&e.forEach(e=>{var s,o=document.createElement("img"),l=document.createElement("span"),i=document.createElement("span"),n=document.createElement("span"),c=document.createElement("li");if(t.closest("#latest")||t.closest("#saved")){var r="upload"===a?e.snippet.resourceId.videoId:e.id.videoId;o.style.backgroundImage="url("+e.snippet.thumbnails.medium.url+")",l.setAttribute("data-id",r),l.setAttribute("data-channel",e.snippet.channelTitle.replace(/\'/gm,"’")),l.setAttribute("data-channel-id",e.snippet.channelId),l.setAttribute("data-date",new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()),n.title=e.snippet.title.replace(/\'/gm,"’")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear(),n.innerText=e.snippet.title.replace(/\'/gm,"’"),s='<span class="span handles"><span class="span save" title="Save" data-color><i class="fa fa-plus"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span>'}else t.closest("#subscriptions")&&(o.style.backgroundImage="url("+e.snippet.thumbnails.default.url+")",l.setAttribute("data-id",e.snippet.resourceId.channelId),n.title=e.snippet.title.replace(/\'/gm,"’"),n.innerText=e.snippet.title.replace(/\'/gm,"’"),s='<span class="span handles"><span class="span star" data-color=""><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star-o" aria-hidden="true"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span>');o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",o.className="img",i.classList="span image",n.classList="span title",l.classList="span listing",c.className="li",c.title=n.title,c.setAttribute("data-background",""),i.appendChild(o),l.appendChild(i),l.appendChild(n),c.appendChild(l),s&&c.insertAdjacentHTML("beforeend",s),-1===t.innerHTML.indexOf(l.getAttribute("data-id"))&&(t===all?-1===favorites.innerHTML.indexOf(l.getAttribute("data-id"))&&t.appendChild(c):t.appendChild(c))})}function getsubscriptions(){if(""!==channelid){"#debug"===window.location.hash&&console.log("Updating subscriptions");var e="https://www.googleapis.com/youtube/v3/subscriptions?part=snippet&channelId="+channelid+"&maxResults=50&key="+youtubekey,t=e+"&pageToken=",a=[];fetch(e).then(e=>e.json()).then(e=>{var s=e.nextPageToken;e.items.forEach(e=>a.push(e));var o=setInterval(()=>{if(s)fetch(t+s).then(e=>e.json()).then(e=>{s=e.nextPageToken,e.items.forEach(e=>a.push(e))});else{clearInterval(o),all.innerHTML="";var e;setTimeout(()=>{(e=[...new Set(a)]).sort((e,t)=>e.snippet.title.localeCompare(t.snippet.title))},1e3),setTimeout(()=>list_em(e,all),2e3);var l=setInterval(()=>{e.length===all.querySelectorAll(".list .li").length&&(clearInterval(l),opt_n>=1&&(localStorage.ytq_all=all.innerHTML))},1e3)}},1e3)}).catch(e=>supernova())}}nav_mode.addEventListener("touchstart",()=>{touch=setTimeout(()=>supernova(),4e3)},!1),nav_mode.addEventListener("touchend",()=>clearTimeout(touch),!1);var s1=Sortable.create(favorites,{group:".channels",handle:".drag",disabled:!0}),s2=Sortable.create(all,{group:".channels",handle:".drag",disabled:!0}),s3=Sortable.create(saved_videos,{group:".videos",handle:".drag",disabled:!0});function saved_reorder(){var e,t=video.classList.contains("pin")?saved.offsetTop-screen.scrollHeight:saved.offsetTop;zenscroll.toY(t,500),saved.classList.toggle("edit"),setTimeout(()=>{e=!saved.classList.contains("edit"),s3.option("disabled",e)},100),setTimeout(()=>{opt_n>=1&&e&&(localStorage.ytq_saved=saved.querySelector(".videos").innerHTML)},200)}function sub_reorder(){var e,t=video.classList.contains("pin")?subscriptions.offsetTop-screen.scrollHeight:subscriptions.offsetTop;zenscroll.toY(t,500),subscriptions.classList.toggle("edit"),setTimeout(()=>{e=!subscriptions.classList.contains("edit"),s1.option("disabled",e),s2.option("disabled",e)},100),setTimeout(()=>{opt_n>=1&&e&&(localStorage.ytq_favorites=favorites.innerHTML,localStorage.ytq_all=all.innerHTML)},200)}function getlatest(e="search"){var t=subscriptions.querySelector(".active .listing").getAttribute("data-id"),a="search"===e?"https://www.googleapis.com/youtube/v3/search?&channelId="+t+"&part=snippet,id&order=date&maxResults=16&type=video&key="+youtubekey:"upload"===e?"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2C+id&playlistId="+t.replace(/UC/gm,"UU")+"&order=date&maxResults=16&key="+youtubekey:"";fetch(a).then(e=>e.json()).then(a=>{var s=latest.querySelector(".videos");s.innerHTML="",s.setAttribute("data-page",1),latest.querySelector(".youtube .a").setAttribute("href","https://www.youtube.com/channel/"+t),"upload"===e&&a.items.sort((e,t)=>new Date(t.snippet.publishedAt)-new Date(e.snippet.publishedAt)),list_em(a.items,latest.querySelector(".videos"),e),setactive()}).catch(e=>console.error(e))}function loadvideo(){var e=document.querySelector(".videos .playing .listing").getAttribute("data-id"),t=window.innerWidth>=window.innerHeight?"maxresdefault":"hqdefault",a=document.getElementById("hd");screen.setAttribute("data-id",e),document.getElementById("img").style=document.querySelector(".videos .active .listing .image .img").getAttribute("style"),a.style=document.querySelector(".videos .active .listing .image .img").getAttribute("style").replace(/mqdefault/gm,t),a.style.opacity=null,document.getElementById("title").innerText=document.querySelector(".videos .active .listing .title").innerText,document.getElementById("channel").innerText=document.querySelector(".videos .active .listing").getAttribute("data-channel"),document.getElementById("channel").parentNode.setAttribute("href","https://www.youtube.com/channel/"+document.querySelector(".videos .active .listing").getAttribute("data-channel-id")),document.getElementById("date").innerText=document.querySelector(".videos .active .listing").getAttribute("data-date"),document.getElementById("youtube").querySelector(".a").setAttribute("href","https://www.youtube.com/channel/"+document.querySelector(".videos .active .listing").getAttribute("data-channel-id")),setTimeout(()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()},500),setTimeout(()=>a.style.opacity=1,1e3)}function playvideo(e=document.querySelector(".videos .playing .listing").getAttribute("data-id")){var t=screen.querySelector("iframe");t?t.parentNode.removeChild(t):(screen.querySelector(".inner").insertAdjacentHTML("afterbegin",'<div id="x"></div>'),new YT.Player("x",{videoId:e,playerVars:{autoplay:1,modestbranding:1,rel:0,playsinline:1,iv_load_policy:3,origin:"https://www.youtube.com"},events:{onStateChange:onPlayerStateChange}}))}function onPlayerStateChange(e){if(0===e.data){var t=screen.querySelector("iframe");t&&(fadeOut(t),setTimeout(()=>t.parentNode.removeChild(t),1e3));var a=setTimeout(()=>{if(document.querySelector(".autoplay").classList.contains("on")&&document.querySelector(".videos .playing").nextElementSibling){var e;document.querySelector(".videos .playing").closest(".latest")?e=latest:document.querySelector(".videos .playing").closest(".saved")&&(e=saved);var t=e.querySelector(".videos .playing").nextElementSibling,a=[...t.parentNode.children].indexOf(t),s=parseInt(latest.querySelector(".videos").getAttribute("data-page"));e.querySelector(".videos .playing").className="li",t.classList="li active playing",t.closest("#latest")&&(12===a&&3===s||8===a&&2===s||4===a&&1===s)&&latest.querySelector(".more").click(),setTimeout(()=>loadvideo(),500),setTimeout(()=>playvideo(document.querySelector(".videos .playing .listing").getAttribute("data-id")),1500)}},2e3);document.querySelectorAll(".videos li").forEach(e=>{e.addEventListener("click",()=>clearTimeout(a))})}}function enableautoplay(){autoplays.forEach(e=>{var t=(e.closest("#latest")?latest:saved).querySelectorAll(".videos .li").length>1?null:"none";e.style.display=t,opt_n>=1&&localStorage.ytq_autoplay&&(e.classList="li autoplay "+localStorage.ytq_autoplay)})}function setactive(){setTimeout(()=>{document.querySelectorAll(".videos .listing").forEach(e=>{var t;t=e.getAttribute("data-id")===screen.getAttribute("data-id")?e.closest(".li").classList.contains("active")?e.closest(".li").classList:document.querySelector(".playing")?"li active":"li active playing":"li",e.closest(".li").classList=t})})}opt_n>=1&&(localStorage.ytq_favorites||localStorage.ytq_all)?(new Date).getDay()%2?localStorage.ytq_recent||(getsubscriptions(),localStorage.ytq_recent="recent"):localStorage.ytq_recent&&localStorage.removeItem("ytq_recent"):(getsubscriptions(),opt_n>=1&&(localStorage.ytq_recent="recent")),document.querySelectorAll(".active").forEach(e=>e.classList="li"),screen.addEventListener("click",()=>playvideo(document.querySelector(".videos .playing .listing").getAttribute("data-id"))),autoplays.forEach(e=>{e.addEventListener("click",()=>{var t=e.classList.contains("off")?"on":"off";e.classList="li autoplay "+t,opt_n>=1&&(localStorage.ytq_autoplay=t),enableautoplay()})}),opt_n>=1&&localStorage.ytq_autoplay&&autoplays.forEach(e=>e.classList="li autoplay "+localStorage.ytq_autoplay);var options_li=options.querySelectorAll(".li");function updateoptions(){options_li.forEach(e=>{var t="ytq_"+e.classList[1];e.classList.toggle("hide",opt_n>=1&&!localStorage.getItem(t))})}function importingexporting(e){var t=win.getAttribute("data-page"),a="IDs or URLs";t!==e?(fadeOut(win,500),setTimeout(()=>{win.setAttribute("data-page",e),options_li.forEach(e=>e.classList.remove("active")),input.value="",input.placeholder="new"===e?"":a,fadeIn(win,500)},1e3)):(input.placeholder="new"===e?"":a,fadeToggle(win,500)),updateoptions()}function importurls(e){var t=[],a=[];e.split(",").forEach(e=>{var s=e.includes("&list=WL")?e.replace(/.*?\?v=|&list=WL.*?$/gm,""):e.includes("&list")?e.replace(/.*?&list=|\&.*?$/gm,""):e.includes("&")?e.replace(/\&.*?$/gm,""):e.replace(/.*?=|.*?\//gm,"");if(!saved.querySelector(".videos").innerHTML.includes(s))if(s.startsWith("PL")){var o="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2C+id&playlistId="+s+"&maxResults=50&key="+youtubekey;fetch(o).then(e=>e.json()).then(e=>{var l=e.nextPageToken,i=o+"&pageToken=";opt_n>=1&&!localStorage.ytq_playlists?localStorage.ytq_playlists=s:opt_n>=1&&!localStorage.ytq_playlists.includes(s)&&(localStorage.ytq_playlists+=","+s),"#debug"===window.location.hash&&(console.log("Items:"),console.log(e.items)),e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)||t.push(e)});var n=setInterval(()=>{if(l)fetch(i+l).then(e=>e.json()).then(e=>{l=e.nextPageToken,e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)||t.push(e)})});else clearInterval(n),a=[...new Set(t)],"#debug"===window.location.hash&&(console.log("List:"),console.log(t),console.log("New list:"),console.log(a)),setTimeout(()=>{a.forEach((e,t)=>{setTimeout(()=>{if(!saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)){var t="https://www.googleapis.com/youtube/v3/videos?part=snippet%2C+id&id="+e.snippet.resourceId.videoId+"&key="+youtubekey;fetch(t).then(e=>e.json()).then(e=>{e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.id)||saved.querySelector(".videos").insertAdjacentHTML("beforeend",'<li class="li" title="'+e.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-background><span class="span listing" data-id="'+e.id+'" data-date="'+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-channel="'+e.snippet.channelTitle.replace(/\'/gm,"&#39;")+'" data-channel-id="'+e.snippet.channelId+'"><span class="span image"><img class="img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="background-image:url('+e.snippet.thumbnails.medium.url+'"></span><span class="span title">'+e.snippet.title.replace(/\'/gm,"&#39;")+'</span></span><span class="span handles"><span class="span save" title="Save" data-color><i class="fa fa-plus"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span></li>')})}).catch(e=>console.error(e))}},10*t)});var e=localStorage.ytq_playlists&&""!==localStorage.ytq_playlists?null:"none";saved.querySelector(".sync").style.display=e,setTimeout(()=>enableautoplay(),500)},1e3)},1e3)}).catch(e=>console.error(e))}else{o="https://www.googleapis.com/youtube/v3/videos?part=snippet%2C+id&id="+s+"&key="+youtubekey;fetch(o).then(e=>e.json()).then(e=>{"#debug"===window.location.hash&&(console.log("Items:"),console.log(e.items)),e.items.forEach(e=>{saved_videos.innerHTML.includes(e.id)&&saved_videos.insertAdjacentHTML("beforeend",'<li class="li" title="'+e.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-background><span class="span listing" data-id="'+e.id+'" data-date="'+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+'" data-channel="'+e.snippet.channelTitle.replace(/\'/gm,"&#39;")+'" data-channel-id="'+e.snippet.channelId+'"><span class="span image"><img class="img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="background-image:url('+e.snippet.thumbnails.medium.url+')"></span><span class="span title">'+e.snippet.title.replace(/\'/gm,"&#39;")+'</span></span><span class="span handles"><span class="span save" title="Save" data-color><i class="fa fa-plus"></i></span><span class="span drag" data-color=""><i class="fa fa-bars" aria-hidden="true"></i></span></span></li>')})}).catch(e=>console.error(e))}}),setTimeout(()=>{localStorage.ytq_saved=saved.querySelector(".videos").innerHTML},4e3)}if(saved.querySelector(".sync").addEventListener("click",()=>{var e=saved.querySelector(".sync"),t=e.classList.contains("off")?"on":"off";e.classList="li sync "+t,opt_n>=1&&(localStorage.ytq_synced=t,t||(localStorage.ytq_playlists=""))}),opt_n>=1&&localStorage.ytq_playlists){var on_off=localStorage.ytq_synced&&"on"===localStorage.ytq_synced?"on":"off";saved.querySelector(".sync").classList="li sync "+on_off}else saved.querySelector(".sync").style.display="none";function importbundle(e){var t,a,s,o,l,i,n;e.indexOf("##id##")>-1&&(t=/##id##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##favorites##")>-1&&(a=/##favorites##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##all##")>-1&&(s=/##all##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##saved##")>-1&&(o=/##saved##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##playlists##")>-1&&(bundleplaylists=/##playlists##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##theme##")>-1&&(l=/##theme##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##mode##")>-1&&(i=/##time##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##pin##")>-1&&(n=/##pin##(.*?)(?=##|$)/gm.exec(e)),setTimeout(()=>{opt_n>=1&&(t&&""!==t[1]&&void 0!==t[1]&&(localStorage.ytq_id=t[1]),a&&""!==a[1]&&void 0!==a[1]&&(localStorage.ytq_favorites=a[1]),s&&""!==s[1]&&void 0!==s[1]&&(localStorage.ytq_all=s[1]),o&&""!==o[1]&&void 0!==o[1]&&(localStorage.ytq_saved=o[1]),bundleplaylists&&""!==bundleplaylists[1]&&void 0!==bundleplaylists[1]&&(localStorage.ytq_playlists=bundleplaylists[1]),l&&""!==l[1]&&void 0!==l[1]&&(localStorage.ytq_theme=l[1]),i&&""!==i[1]&&void 0!==i[1]&&(localStorage.ytq_mode=i[1]),n&&""!==n[1]&&void 0!==n[1]&&(localStorage.ytq_pin=n[1]))},500)}function exitnav(e){setTimeout(()=>fadeOut(win),e),setTimeout(()=>toggle.click(),1e3+e),setTimeout(()=>input.value="",2e3+e)}function pinz(){nav.querySelector(".pin .span").classList.toggle("p"),opt_n>=1&&(localStorage.ytq_pin=nav.querySelector(".pin .span").classList.contains("p")?"pin":""),pinned()}function pinned(){"pin"===localStorage.ytq_pin?(nav.querySelector(".pin .span").classList.add("p"),window.innerWidth>window.innerHeight&&window.scrollY>screen.offsetTop+screen.scrollHeight?video.classList.add("pin"):window.innerWidth<=window.innerHeight?video.classList.add("pin"):video.classList.remove("pin")):video.classList.remove("pin")}options_li.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active"),setTimeout(()=>{var e="";opt_n>=1&&(options.querySelector(".id").classList.contains("active")&&(e+="##id##"+localStorage.ytq_id),options.querySelector(".favorites").classList.contains("active")&&(e+="##favorites##"+localStorage.ytq_favorites),options.querySelector(".all").classList.contains("active")&&(e+="##all##"+localStorage.ytq_all),options.querySelector(".saved").classList.contains("active")&&(e+="##saved##"+localStorage.ytq_saved),options.querySelector(".playlists").classList.contains("active")&&(e+="##playlists##"+localStorage.ytq_playlists),options.querySelector(".theme").classList.contains("active")&&(e+="##theme##"+localStorage.ytq_theme),options.querySelector(".mode").classList.contains("active")&&(e+="##mode##"+localStorage.ytq_mode),options.querySelector(".pin").classList.contains("active")&&(e+="##pin##"+localStorage.ytq_pin)),input.value=e},10)})}),input.addEventListener("click",()=>{"export"===win.getAttribute("data-page")&&input.select()}),document.getElementById("button").addEventListener("click",()=>{var e=input.value;""!==e&&("new"===win.getAttribute("data-page")?(e.startsWith("http")?importurls(e):e.startsWith("##")?importbundle(e):opt_n>=1&&(localStorage.ytq_id="redmond"===e?"UCqMnpO2ok_usDfeoTm36EGA":e),exitnav(1e3),setTimeout(()=>fadeOut(nav),3e3),setTimeout(()=>fadeOut(main),4e3),setTimeout(()=>window.location.reload(),5e3)):"import"===win.getAttribute("data-page")&&(importurls(e),exitnav(1e3)))}),document.getElementById("exit").addEventListener("click",()=>exitnav()),pinned(),window.addEventListener("scroll",()=>pinned()),window.addEventListener("resize",()=>pinned()),document.getElementById("toggle").addEventListener("click",()=>{var e=win.scrollHeight>0?500:0;setTimeout(()=>nav.classList.toggle("active"),e),win.scrollHeight>0&&fadeOut(win,500)});var navs=nav.querySelectorAll(".ul .li");navs.forEach(e=>{e.addEventListener("click",t=>{if(e.classList.contains("import"))importingexporting("import");else if(e.classList.contains("export"))importingexporting("export");else if(e.classList.contains("refresh"))t.shiftKey?window.location.reload(!0):(opt_n>=1&&localStorage.ytq_playlists&&saved.querySelector(".sync").classList.contains("on")&&importurls(localStorage.ytq_playlists),"block"===all.style.display&&getsubscriptions());else if(e.classList.contains("theme"))themez(t);else if(e.classList.contains("mode"))if(t.shiftKey){if(!window.confirm("Are you sure you want to trigger a supernova? This will reset everything!"))return!1;supernova()}else t.altKey?window.location="/ytl":modez();else e.classList.contains("pin")&&pinz()})}),win.querySelector(".fade").addEventListener("click",()=>exitnav());var h2s=document.querySelectorAll("h2 .title");h2s.forEach(e=>{e.addEventListener("click",()=>{if(!document.getElementById("new")){var t=e.closest(".h2"),a=t.nextElementSibling;t.classList.toggle("expanded"),setTimeout(()=>{if(t.classList.contains("expanded")){if(e.closest(".latest")&&!subscriptions.querySelector(".channels .active")?(setTimeout(()=>{var e=favorites.querySelector(".li")?favorites:all,s=Math.floor(Math.random()*e.querySelectorAll(".li").length);e.querySelectorAll(".li")[s].click(),t.querySelector(".arrow .fa").classList="fa fa-angle-up",slideDown(a)},1e3),setTimeout(()=>enableautoplay(),2e3)):(t.querySelector(".arrow .fa").classList="fa fa-angle-up",slideDown(a),setactive(),enableautoplay()),document.getElementById("news")){var s=document.getElementById("news");s.classList.add("wait"),setTimeout(()=>s.parentElement.removeChild(s),1e3),sessionStorage.news="Seen it"}}else t.querySelector(".arrow .fa").classList="fa fa-angle-down",slideUp(a);e.closest(".subscriptions")&&setTimeout(()=>{"none"===a.style.display&&(all.style="")},600)})}})});var touch,resizing,menus=document.querySelectorAll(".menu .li");function enablereorder(){var e=saved_videos.children.length>1?"block":"none";saved.querySelector(".reorder").style.display=e}function themez(e){var t,a,s=document.body.classList;t=s.contains("a")?"a":s.contains("b")?"b":s.contains("c")?"c":s.contains("d")?"d":s.contains("e")?"e":s.contains("f")?"f":s.contains("g")?"g":s.contains("h")?"h":s.contains("i")?"i":s.contains("j")?"j":s.contains("k")?"k":s.contains("l")?"l":s.contains("m")?"m":s.contains("n")?"n":s.contains("o")?"o":s.contains("p")?"p":s.contains("q")?"q":s.contains("r")?"r":s.contains("s")?"s":s.contains("aa")?"aa":"bb",a=s.contains("a")?"b":s.contains("b")?"c":s.contains("c")?"d":s.contains("d")?"e":s.contains("e")?"f":s.contains("f")?"g":s.contains("g")?"h":s.contains("h")?"i":s.contains("i")?"j":s.contains("j")?"k":s.contains("k")?"l":s.contains("l")?"m":s.contains("m")?"n":s.contains("n")?"o":s.contains("o")?"p":s.contains("p")?"q":s.contains("q")?"r":s.contains("r")?"s":s.contains("s")?"aa":s.contains("aa")?"bb":"a",document.body.classList.remove(t),document.body.classList.add(a),opt_n>=1&&(localStorage.ytq_theme=a)}function recalltheme(){var e=opt_n>=1&&localStorage.ytq_mode?localStorage.ytq_mode:"day",t=opt_n>=1&&localStorage.ytq_theme?localStorage.ytq_theme:"aa";document.body.classList="body "+e+" "+t}function modez(){var e=document.body.classList.contains("day")?"day":"night",t=document.body.classList.contains("day")?"night":"day";document.body.classList.remove(e),document.body.classList.add(t),opt_n>=1&&(localStorage.ytq_mode=t)}function newsize(){var e=document.querySelector("#info .h1").scrollHeight,t=document.querySelector("#info .channel").scrollHeight>=document.querySelector("#info .date").scrollHeight?document.querySelector("#info .channel").scrollHeight:document.querySelector("#info .date").scrollHeight;document.getElementById("info").style.height=e+t+"px"}function update_storage(){document.body.style.display="none",console.log("Updating..."),opt_n>=1&&(localStorage.id&&(localStorage.ytq_id=localStorage.id),localStorage.favorites&&(localStorage.ytq_favorites=localStorage.favorites),localStorage.all&&(localStorage.ytq_all=localStorage.all),localStorage.saved&&(localStorage.ytq_saved=localStorage.saved),localStorage.playlists&&(localStorage.ytq_playlists=localStorage.playlists),localStorage.theme&&(localStorage.ytq_theme=localStorage.theme),localStorage.mode&&(localStorage.ytq_mode=localStorage.mode),localStorage.pin&&(localStorage.ytq_pin=localStorage.pin),localStorage.synced&&(localStorage.ytq_synced=localStorage.synced),localStorage.autoplay&&(localStorage.ytq_autoplay=localStorage.autoplay),localStorage.recent&&(localStorage.ytq_recent=localStorage.recent)),setTimeout(()=>{localStorage.removeItem("id"),localStorage.removeItem("favorites"),localStorage.removeItem("all"),localStorage.removeItem("saved"),localStorage.removeItem("playlists"),localStorage.removeItem("theme"),localStorage.removeItem("mode"),localStorage.removeItem("pin"),localStorage.removeItem("synced"),localStorage.removeItem("autoplay"),localStorage.removeItem("recent")},1e3),setTimeout(()=>window.location.reload(),2e3)}menus.forEach(e=>{e.addEventListener("click",()=>{if(e.closest(".latest")){if(e.classList.contains("more")){var t=parseInt(latest.querySelector(".videos").getAttribute("data-page"))+1;latest.querySelector(".videos").setAttribute("data-page",t)}}else e.closest(".subscriptions")?e.classList.contains("more")?slideDown(all,500):e.classList.contains("reorder")?sub_reorder():e.classList.contains("refresh")&&getsubscriptions():e.closest(".saved")&&e.classList.contains("reorder")&&saved_reorder()})}),enablereorder(),document.body.addEventListener("click",e=>{var t=e.target;if("li"===t.localName){if(t.closest(".saved.edit"))return!1;if(t.closest(".videos"))if(t.classList.contains("active")){if(t.classList.contains("playing"))return!1;document.querySelector(".playing")&&(document.querySelector(".playing").classList.remove("playing"),t.classList.add("playing"))}else{if(video.querySelector(".screen iframe")){if(!window.confirm("Stop current video?"))return!1;(a=video.querySelector(".screen iframe")).parentNode.removeChild(a),document.querySelector(".videos .active")&&document.querySelectorAll(".videos .active").forEach(e=>e.classList="li"),t.classList="li active playing",loadvideo(),setTimeout(()=>setactive(),10)}else document.querySelector(".videos .active")&&document.querySelectorAll(".videos .active").forEach(e=>e.classList="li"),t.classList="li active playing",loadvideo(),setTimeout(()=>setactive(),10),0===video.scrollHeight&&(slideDown(video),setTimeout(()=>{opt_n>=1&&localStorage.ytq_pin&&"pin"===localStorage.ytq_pin&&window.innerHeight>window.innerWidth&&video.classList.add("pin")},500));video.classList.contains("pin")||zenscroll.toY(0,500)}else if(t.closest(".channels")&&!subscriptions.classList.contains("edit")){if(t.classList.contains("active"))return!1;document.querySelector(".channels .active")&&(document.querySelector(".channels .active").classList="li"),t.classList.add("active"),getlatest("upload"),setTimeout(()=>{if(0===latest.querySelector(".videos").scrollHeight&&latest.querySelector(".h2 .title").click(),window.innerHeight>window.innerWidth){var e=video.classList.contains("pin")?latest.offsetTop-screen.scrollHeight:latest.offsetTop;zenscroll.toY(e,500)}},250),setTimeout(()=>enableautoplay(),750)}}else if("span"===t.localName){if(t.classList.contains("save")){if(t.closest(".latest")){if(saved.querySelector(".videos").innerHTML.includes(t.parentNode.previousElementSibling.getAttribute("data-id")))return!1;t.title="Remove",saved.querySelector(".videos").insertAdjacentHTML("beforeend",t.closest(".li").outerHTML),setTimeout(()=>t.title="Save")}else{(a=t.closest(".li")).parentNode.removeChild(a)}enableautoplay(),enablereorder(),setTimeout(()=>localStorage.ytq_saved=saved.querySelector(".videos").innerHTML,500)}else if(t.classList.contains("star")){var a=t.closest(".li");(t.closest(".favorites")?all:favorites).insertAdjacentHTML("beforeend",a.outerHTML),a.parentNode.removeChild(a)}setactive()}}),nav.querySelector(".refresh").addEventListener("touchstart",()=>{touch=setTimeout(()=>window.location.reload(!0),2e3)},!1),nav.querySelector(".refresh").addEventListener("touchend",()=>clearTimeout(touch),!1),recalltheme(),window.addEventListener("resize",()=>{clearTimeout(resizing),resizing=setTimeout(()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()},1e3)}),window.addEventListener("scroll",()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()});
