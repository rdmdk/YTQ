const main=document.getElementById("main"),video=document.getElementById("video"),screen=document.getElementById("screen"),latest=document.getElementById("latest"),subscriptions=document.getElementById("subscriptions"),favorites=document.getElementById("favorites"),all=document.getElementById("all"),saved=document.getElementById("saved"),nav=document.getElementById("nav"),prefs=document.getElementById("preferences"),win=document.getElementById("window"),youtubekey="AIzaSyAfrBvS4cGHrdMcLQYCKqcfKELVCx3qadY";let channelid="";function supernova(){localStorage.clear(),setTimeout(()=>toggle.click(),1e3),setTimeout(()=>fadeOut(nav),2e3),setTimeout(()=>fadeOut(main),3e3),setTimeout(()=>window.location.reload(!0),4e3)}function getsubscriptions(){if(""!==channelid){"#debug"===window.location.hash&&console.log("Updating subscriptions");let e="https://www.googleapis.com/youtube/v3/subscriptions?part=snippet&channelId="+channelid+"&maxResults=50&key="+youtubekey,t=e+"&pageToken=",s=[];fetch(e).then(e=>e.json()).then(e=>{let a=e.nextPageToken;e.items.forEach(e=>{s.push(e)});let l=setInterval(()=>{if(a)fetch(t+a).then(e=>e.json()).then(e=>{a=e.nextPageToken,e.items.forEach(e=>s.push(e))});else clearInterval(l),all.innerHTML="",setTimeout(()=>{let e=[...new Set(s)];e.sort((e,t)=>e.snippet.title.localeCompare(t.snippet.title)),console.log(e),e.forEach((e,t)=>{setTimeout(function(){-1===favorites.innerHTML.indexOf(e.snippet.resourceId.channelId)&&all.insertAdjacentHTML("beforeend","<li class='li' data-background><span class='span listing' data-id='"+e.snippet.resourceId.channelId+"'><span class='span image'><img class='img' src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' style='background-image:url("+e.snippet.thumbnails.default.url+");'></span><span class='span title'>"+e.snippet.title.replace(/\'/gm,"&#39;")+"</span></span><span class='span handles'><span class='span star' data-color=''><i class='fa fa-star' aria-hidden='true'></i></span><span class='span drag' data-color=''><i class='fa fa-bars' aria-hidden='true'></i></span></span></li>")},10*t)})},1e3),setTimeout(()=>localStorage.all=all.innerHTML,5e3)},1e3)}).catch(e=>supernova())}}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?document.querySelector("html").classList.add("mobile"):document.querySelector("html").classList.add("desktop"),localStorage.id||localStorage.all||(main.insertAdjacentHTML("beforeend","<h2 id='new' class='h2 new wait' data-color><span class='span'>New here?</span></h2>"),document.body.addEventListener("click",e=>{"new"===e.target.id&&(document.getElementById("toggle").click(),importingexporting("new"),setTimeout(()=>e.target.style.display="none",1e3))}),setTimeout(()=>document.getElementById("new").classList.remove("wait"),2e3)),localStorage.news||sessionStorage.news||localStorage.id&&(main.insertAdjacentHTML("beforeend","<h2 id='news' class='h2 new wait' title='Check out the lite version of YTL!' data-color><span class='span'>Check out YTL!</span></h2>"),document.body.addEventListener("click",e=>{"news"===e.target.id&&(localStorage.news="Seen it",window.location="/ytl")}),setTimeout(()=>document.getElementById("news").classList.remove("wait"),2e3)),localStorage.id&&(channelid=localStorage.id),localStorage.favorites&&(favorites.innerHTML=localStorage.favorites),localStorage.all&&(all.innerHTML=localStorage.all),localStorage.saved&&(saved.querySelector(".videos").innerHTML=localStorage.saved),nav.querySelector(".mode").addEventListener("touchstart",()=>{touch=setTimeout(()=>supernova(),4e3)},!1),nav.querySelector(".mode").addEventListener("touchend",()=>clearTimeout(touch),!1);var s1=Sortable.create(favorites,{group:".channels",handle:".drag",disabled:!0}),s2=Sortable.create(all,{group:".channels",handle:".drag",disabled:!0});function reorderz(){let e,t=video.classList.contains("pin")?subscriptions.offsetTop-screen.scrollHeight:subscriptions.offsetTop;zenscroll.toY(t,500),subscriptions.classList.toggle("edit"),setTimeout(()=>{e=!subscriptions.classList.contains("edit"),s1.option("disabled",e),s2.option("disabled",e)},100),setTimeout(()=>{e&&(localStorage.favorites=favorites.innerHTML,localStorage.all=all.innerHTML)},200)}localStorage.favorites||localStorage.all?(new Date).getDay()%2?localStorage.recent||(getsubscriptions(),localStorage.recent="recent"):localStorage.recent&&localStorage.removeItem("recent"):(getsubscriptions(),localStorage.recent="recent");const actives=document.querySelectorAll(".active");function getlatest(e="search"){subscriptions.querySelector(".active .title").innerText;let t=subscriptions.querySelector(".active .listing").getAttribute("data-id"),s="";"search"===e?s="https://www.googleapis.com/youtube/v3/search?&channelId="+t+"&part=snippet,id&order=date&maxResults=16&type=video&key="+youtubekey:"upload"===e&&(s="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2C+id&playlistId="+t.replace(/UC/gm,"UU")+"&order=date&maxResults=16&key="+youtubekey),fetch(s).then(e=>e.json()).then(s=>{latest.querySelector(".videos").innerHTML="",latest.querySelector(".videos").setAttribute("data-page",1),latest.querySelector(".youtube .a").setAttribute("href","https://www.youtube.com/channel/"+t),"upload"===e&&s.items.sort((e,t)=>new Date(t.snippet.publishedAt)-new Date(e.snippet.publishedAt)),s.items.forEach(t=>{let s="upload"===e?t.snippet.resourceId.videoId:t.id.videoId;latest.querySelector(".videos").insertAdjacentHTML("beforeend","<li class='li' title='"+t.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(t.snippet.publishedAt).getDate()+" "+new Date(t.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(t.snippet.publishedAt).getFullYear()+"' data-background><span class='span listing' data-id='"+s+"' data-date='"+new Date(t.snippet.publishedAt).getDate()+" "+new Date(t.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(t.snippet.publishedAt).getFullYear()+"' data-channel='"+t.snippet.channelTitle.replace(/\'/gm,"&#39;")+"' data-channel-id='"+t.snippet.channelId+"'><span class='span image'><img class='img' src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' style='background-image:url("+t.snippet.thumbnails.medium.url+"'></span><span class='span title'>"+t.snippet.title.replace(/\'/gm,"&#39;")+"</span></span><span class='save' title='Save' data-color><i class='fa fa-plus'></i></span></li>")}),setactive()}).catch(e=>console.error(e))}function loadvideo(){let e=document.querySelector(".videos .playing .listing").getAttribute("data-id"),t=window.innerWidth>=window.innerHeight?"maxresdefault":"hqdefault";document.getElementById("screen").setAttribute("data-id",e),document.getElementById("img").style=document.querySelector(".videos .active .listing .image .img").getAttribute("style"),document.getElementById("hd").style=document.querySelector(".videos .active .listing .image .img").getAttribute("style").replace(/mqdefault/gm,t),document.getElementById("hd").style.opacity=null,document.getElementById("title").innerText=document.querySelector(".videos .active .listing .title").innerText,document.getElementById("channel").innerText=document.querySelector(".videos .active .listing").getAttribute("data-channel"),document.getElementById("channel").parentNode.setAttribute("href","https://www.youtube.com/channel/"+document.querySelector(".videos .active .listing").getAttribute("data-channel-id")),document.getElementById("date").innerText=document.querySelector(".videos .active .listing").getAttribute("data-date"),document.getElementById("youtube").querySelector(".a").setAttribute("href","https://www.youtube.com/channel/"+document.querySelector(".videos .active .listing").getAttribute("data-channel-id")),setTimeout(()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()},500),setTimeout(()=>document.getElementById("hd").style.opacity=1,1e3)}function playvideo(e=document.querySelector(".videos .playing .listing").getAttribute("data-id")){if(video.querySelector(".screen iframe")){let e=video.querySelector(".screen iframe");e.parentNode.removeChild(e)}else video.querySelector(".screen .inner").insertAdjacentHTML("afterbegin","<div id='x'></div>"),new YT.Player("x",{videoId:e,playerVars:{autoplay:1,modestbranding:1,rel:0,playsinline:1,iv_load_policy:3,origin:"https://www.youtube.com"},events:{onStateChange:onPlayerStateChange}})}function onPlayerStateChange(e){if(0===e.data){let e=video.querySelector(".screen iframe");fadeOut(e),setTimeout(()=>e.parentNode.removeChild(e),1e3),setTimeout(()=>{if(document.querySelector(".autoplay").classList.contains("on")&&document.querySelector(".videos .playing").nextElementSibling){let e;document.querySelector(".videos .playing").closest(".latest")?e=document.getElementById("latest"):document.querySelector(".videos .playing").closest(".saved")&&(e=document.getElementById("saved"));let t=e.querySelector(".videos .playing").nextElementSibling,s=[...t.parentNode.children].indexOf(t),a=parseInt(latest.querySelector(".videos").getAttribute("data-page"));e.querySelector(".videos .playing").className="li",t.classList="li active playing",t.closest("#latest")&&(12===s&&3===a||8===s&&2===a||4===s&&1===a)&&latest.querySelector(".more").click(),setTimeout(()=>loadvideo(),500),setTimeout(()=>playvideo(document.querySelector(".videos .playing .listing").getAttribute("data-id")),1500)}},2e3)}}function enableautoplay(){document.querySelectorAll(".autoplay").forEach(e=>{localStorage.autoplay&&(e.classList="li autoplay "+localStorage.autoplay)}),latest.querySelectorAll(".videos .li").length>1?latest.querySelector(".autoplay").style.display=null:latest.querySelector(".autoplay").style.display="none",saved.querySelectorAll(".videos .li").length>1?saved.querySelector(".autoplay").style.display=null:saved.querySelector(".autoplay").style.display="none"}function setactive(){setTimeout(()=>{document.querySelectorAll(".videos .listing").forEach(e=>{e.getAttribute("data-id")===screen.getAttribute("data-id")?e.closest(".li").classList.contains("active")||(document.querySelector(".playing")?e.closest(".li").classList="li active":e.closest(".li").classList="li active playing"):e.closest(".li").classList="li"})})}actives.forEach(e=>e.classList="li"),video.querySelector(".screen").addEventListener("click",()=>playvideo(document.querySelector(".videos .playing .listing").getAttribute("data-id"))),document.querySelectorAll(".autoplay").forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("off")?(e.classList="li autoplay on",localStorage.autoplay="on"):(e.classList="li autoplay off",localStorage.autoplay="off"),enableautoplay()})}),localStorage.autoplay&&(latest.querySelector(".autoplay").classList="li autoplay "+localStorage.autoplay),localStorage.autoplay&&(saved.querySelector(".autoplay").classList="li autoplay "+localStorage.autoplay);const options=document.querySelectorAll("#options .li");function updateoptions(){options.forEach(e=>{let t=e.classList[1];localStorage.getItem(t)?e.classList.remove("hide"):e.classList.add("hide")})}function importingexporting(e){let t=win.getAttribute("data-page"),s="IDs or URLs";t!==e?(fadeOut(win,500),setTimeout(()=>{win.setAttribute("data-page",e),options.forEach(e=>e.classList.remove("active")),document.getElementById("input").value="",document.getElementById("input").placeholder="new"===e?"":s,fadeIn(win,500)},1e3)):(document.getElementById("input").placeholder="new"===e?"":s,fadeToggle(win,500)),updateoptions()}function importurls(e){let t=[],s=[];e.split(",").forEach(e=>{let a;if(a=e.includes("&list=WL")?e.replace(/.*?\?v=|&list=WL.*?$/gm,""):e.includes("&list")?e.replace(/.*?&list=|\&.*?$/gm,""):e.includes("&")?e.replace(/\&.*?$/gm,""):e.replace(/.*?=|.*?\//gm,""),!saved.querySelector(".videos").innerHTML.includes(a))if(a.startsWith("PL")){let e="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2C+id&playlistId="+a+"&maxResults=50&key="+youtubekey;fetch(e).then(e=>e.json()).then(l=>{let o=l.nextPageToken,i=e+"&pageToken=";localStorage.playlists?localStorage.playlists.includes(a)||(localStorage.playlists+=","+a):localStorage.playlists=a,"#debug"===window.location.hash&&(console.log("Items:"),console.log(l.items)),l.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)||t.push(e)});let n=setInterval(()=>{if(o)fetch(i+o).then(e=>e.json()).then(e=>{o=e.nextPageToken,e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)||t.push(e)})});else clearInterval(n),s=[...new Set(t)],"#debug"===window.location.hash&&(console.log("List:"),console.log(t),console.log("New list:"),console.log(s)),setTimeout(()=>{s.forEach((e,t)=>{setTimeout(function(){if(!saved.querySelector(".videos").innerHTML.includes(e.snippet.resourceId.videoId)){let t="https://www.googleapis.com/youtube/v3/videos?part=snippet%2C+id&id="+e.snippet.resourceId.videoId+"&key="+youtubekey;fetch(t).then(e=>e.json()).then(e=>{e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.id)||saved.querySelector(".videos").insertAdjacentHTML("beforeend","<li class='li' title='"+e.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+"' data-background><span class='span listing' data-id='"+e.id+"' data-date='"+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+"' data-channel='"+e.snippet.channelTitle.replace(/\'/gm,"&#39;")+"' data-channel-id='"+e.snippet.channelId+"'><span class='span image'><img class='img' src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' style='background-image:url("+e.snippet.thumbnails.medium.url+"'></span><span class='span title'>"+e.snippet.title.replace(/\'/gm,"&#39;")+"</span></span><span class='save' title='Save' data-color><i class='fa fa-plus'></i></span></li>")})}).catch(e=>console.error(e))}},10*t)}),localStorage.playlists&&""!==localStorage.playlists?saved.querySelector(".sync").style.display=null:saved.querySelector(".sync").style.display="none",setTimeout(()=>enableautoplay(),500)},1e3)},1e3)}).catch(e=>console.error(e))}else{fetch("https://www.googleapis.com/youtube/v3/videos?part=snippet%2C+id&id="+a+"&key="+youtubekey).then(e=>e.json()).then(e=>{"#debug"===window.location.hash&&(console.log("Items:"),console.log(e.items)),e.items.forEach(e=>{saved.querySelector(".videos").innerHTML.includes(e.id)||saved.querySelector(".videos").insertAdjacentHTML("beforeend","<li class='li' title='"+e.snippet.title.replace(/\'/gm,"&#39;")+" - "+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+"' data-background><span class='span listing' data-id='"+e.id+"' data-date='"+new Date(e.snippet.publishedAt).getDate()+" "+new Date(e.snippet.publishedAt).toLocaleString("en-us",{month:"short"})+" "+new Date(e.snippet.publishedAt).getFullYear()+"' data-channel='"+e.snippet.channelTitle.replace(/\'/gm,"&#39;")+"' data-channel-id='"+e.snippet.channelId+"'><span class='span image'><img class='img' src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' style='background-image:url("+e.snippet.thumbnails.medium.url+"'></span><span class='span title'>"+e.snippet.title.replace(/\'/gm,"&#39;")+"</span></span><span class='save' title='Save' data-color><i class='fa fa-plus'></i></span></li>")})}).catch(e=>console.error(e))}}),setTimeout(()=>{localStorage.saved=saved.querySelector(".videos").innerHTML},4e3)}function importbundle(e){let t,s,a,l,o,i,n;console.log("Importing..."),e.indexOf("##id##")>-1&&(t=/##id##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##favorites##")>-1&&(s=/##favorites##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##all##")>-1&&(a=/##all##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##saved##")>-1&&(l=/##saved##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##playlists##")>-1&&(bundleplaylists=/##playlists##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##theme##")>-1&&(o=/##theme##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##mode##")>-1&&(i=/##time##(.*?)(?=##|$)/gm.exec(e)),e.indexOf("##pin##")>-1&&(n=/##pin##(.*?)(?=##|$)/gm.exec(e)),setTimeout(()=>{t&&""!==t[1]&&void 0!==t[1]&&(localStorage.id=t[1]),s&&""!==s[1]&&void 0!==s[1]&&(localStorage.favorites=s[1]),a&&""!==a[1]&&void 0!==a[1]&&(localStorage.all=a[1]),l&&""!==l[1]&&void 0!==l[1]&&(localStorage.saved=l[1]),bundleplaylists&&""!==bundleplaylists[1]&&void 0!==bundleplaylists[1]&&(localStorage.playlists=bundleplaylists[1]),o&&""!==o[1]&&void 0!==o[1]&&(localStorage.theme=o[1]),i&&""!==i[1]&&void 0!==i[1]&&(localStorage.mode=i[1]),n&&""!==n[1]&&void 0!==n[1]&&(localStorage.pin=n[1])},500)}function exitnav(e){setTimeout(()=>fadeOut(win),e),setTimeout(()=>toggle.click(),1e3+e),setTimeout(()=>document.getElementById("input").value="",2e3+e)}function pinz(){nav.querySelector(".pin .span").classList.toggle("p"),localStorage.pin=nav.querySelector(".pin .span").classList.contains("p")?"pin":"",pinned()}function pinned(){"pin"===localStorage.pin?(nav.querySelector(".pin .span").classList.add("p"),window.innerWidth>window.innerHeight&&window.scrollY>screen.offsetTop+screen.scrollHeight?video.classList.add("pin"):window.innerWidth<=window.innerHeight?video.classList.add("pin"):video.classList.remove("pin")):video.classList.remove("pin")}saved.querySelector(".sync").addEventListener("click",()=>{let e=saved.querySelector(".sync");e.classList.contains("off")?(e.classList="li sync on",localStorage.synced="on"):(e.classList="li sync off",localStorage.synced="off",localStorage.playlists="")}),localStorage.playlists?localStorage.synced&&"on"===localStorage.synced?saved.querySelector(".sync").classList="li sync on":saved.querySelector(".sync").classList="li sync off":saved.querySelector(".sync").style.display="none",options.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active"),setTimeout(()=>{let e="";document.querySelector("#options .id").classList.contains("active")&&(e+="##id##"+localStorage.id),document.querySelector("#options .favorites").classList.contains("active")&&(e+="##favorites##"+localStorage.favorites),document.querySelector("#options .all").classList.contains("active")&&(e+="##all##"+localStorage.all),document.querySelector("#options .saved").classList.contains("active")&&(e+="##saved##"+localStorage.saved),document.querySelector("#options .playlists").classList.contains("active")&&(e+="##playlists##"+localStorage.playlists),document.querySelector("#options .theme").classList.contains("active")&&(e+="##theme##"+localStorage.theme),document.querySelector("#options .mode").classList.contains("active")&&(e+="##mode##"+localStorage.mode),document.querySelector("#options .pin").classList.contains("active")&&(e+="##pin##"+localStorage.pin),document.getElementById("input").value=e},10)})}),document.getElementById("input").addEventListener("click",()=>{"export"===win.getAttribute("data-page")&&document.getElementById("input").select()}),document.getElementById("button").addEventListener("click",()=>{let e=document.getElementById("input").value;""!==e&&("new"===win.getAttribute("data-page")?(e.startsWith("http")?importurls(e):e.startsWith("##")?importbundle(e):localStorage.id="redmond"===e?"UCqMnpO2ok_usDfeoTm36EGA":"victoria"===e?"UCHPVh0gqxn5IO3geNxI6uxQ":"charlie"===e?"UCb2CJSF7SNz55COAHQ3-dBQ":e,exitnav(1e3),setTimeout(()=>fadeOut(nav),3e3),setTimeout(()=>fadeOut(main),4e3),setTimeout(()=>window.location.reload(),5e3)):"import"===win.getAttribute("data-page")&&(importurls(e),exitnav(1e3)))}),document.getElementById("exit").addEventListener("click",()=>exitnav()),pinned(),window.addEventListener("scroll",()=>pinned()),window.addEventListener("resize",()=>pinned()),document.getElementById("toggle").addEventListener("click",()=>{let e=win.scrollHeight>0?500:0;setTimeout(()=>nav.classList.toggle("active"),e),win.scrollHeight>0&&fadeOut(win,500)});const navs=nav.querySelectorAll(".ul .li");navs.forEach(e=>{e.addEventListener("click",t=>{if(e.classList.contains("import"))importingexporting("import");else if(e.classList.contains("export"))importingexporting("export");else if(e.classList.contains("refresh"))t.shiftKey?window.location.reload(!0):(localStorage.playlists&&saved.querySelector(".sync").classList.contains("on")&&importurls(localStorage.playlists),getsubscriptions());else if(e.classList.contains("theme"))themez(t);else if(e.classList.contains("mode"))if(t.shiftKey){if(!window.confirm("Are you sure you want to trigger a supernova? This will reset everything!"))return!1;supernova()}else t.altKey?window.location="/ytl":modez();else e.classList.contains("pin")&&pinz()})}),win.querySelector(".fade").addEventListener("click",()=>exitnav());const h2s=document.querySelectorAll("h2 .title");h2s.forEach(e=>{e.addEventListener("click",()=>{if(!document.getElementById("new")){let t=e.closest(".h2"),s=t.nextElementSibling;t.classList.toggle("expanded"),setTimeout(()=>{if(t.classList.contains("expanded")){if(e.closest(".latest")&&!subscriptions.querySelector(".channels .active")?(setTimeout(()=>{let e=favorites.querySelector(".li")?favorites:all,a=Math.floor(Math.random()*e.querySelectorAll(".li").length);e.querySelectorAll(".li")[a].click(),t.querySelector(".arrow .fa").classList="fa fa-angle-up",slideDown(s)},1e3),setTimeout(()=>enableautoplay(),2e3)):(t.querySelector(".arrow .fa").classList="fa fa-angle-up",slideDown(s),setactive(),enableautoplay()),document.getElementById("news")){let e=document.getElementById("news");e.classList.add("wait"),setTimeout(()=>e.parentElement.removeChild(e),1e3),sessionStorage.news="Seen it"}}else t.querySelector(".arrow .fa").classList="fa fa-angle-down",slideUp(s);e.closest(".subscriptions")&&setTimeout(()=>{"none"===s.style.display&&(all.style="")},600)})}})});const menus=document.querySelectorAll(".menu .li");function themez(e){let t,s;e.shiftKey?(font(),setTimeout(()=>newsize(),1e3)):(document.body.classList.contains("a")?(t="a",s="b"):document.body.classList.contains("b")?(t="b",s="c"):document.body.classList.contains("c")?(t="c",s="d"):document.body.classList.contains("d")?(t="d",s="e"):document.body.classList.contains("e")?(t="e",s="f"):document.body.classList.contains("f")?(t="f",s="g"):document.body.classList.contains("g")?(t="g",s="h"):document.body.classList.contains("h")?(t="h",s="i"):document.body.classList.contains("i")?(t="i",s="j"):document.body.classList.contains("j")?(t="j",s="k"):document.body.classList.contains("k")?(t="k",s="l"):document.body.classList.contains("l")?(t="l",s="m"):document.body.classList.contains("m")?(t="m",s="n"):document.body.classList.contains("n")?(t="n",s="o"):document.body.classList.contains("o")?(t="o",s="p"):document.body.classList.contains("p")?(t="p",s="q"):document.body.classList.contains("q")?(t="q",s="r"):document.body.classList.contains("r")?(t="r",s="s"):document.body.classList.contains("s")?(t="s",s="aa"):document.body.classList.contains("aa")?(t="aa",s="bb"):(t="bb",s="a"),document.body.classList.remove(t),document.body.classList.add(s),localStorage.theme=s)}var touch,resizing;function recalltheme(){var e=localStorage.mode?localStorage.mode:"day",t=localStorage.theme?localStorage.theme:"aa";document.body.classList="body "+e+" "+t,localStorage.font&&document.body.classList.add(localStorage.font)}function font(){let e=localStorage.font?localStorage.font:"prox",t="";"prox"===e?t="helv":"helv"===e&&(t="prox"),document.body.classList.remove(e),document.body.classList.add(t),localStorage.font=t}function modez(){let e,t;document.body.classList.contains("day")?(e="day",t="night"):(e="night",t="day"),document.body.classList.remove(e),document.body.classList.add(t),localStorage.mode=t}function newsize(){let e=document.querySelector("#info .h1").scrollHeight,t=document.querySelector("#info .channel").scrollHeight>=document.querySelector("#info .date").scrollHeight?document.querySelector("#info .channel").scrollHeight:document.querySelector("#info .date").scrollHeight;document.getElementById("info").style.height=e+t+"px"}menus.forEach(e=>{e.addEventListener("click",()=>{if(e.closest(".latest")){if(e.classList.contains("more")){let e=parseInt(latest.querySelector(".videos").getAttribute("data-page"))+1;latest.querySelector(".videos").setAttribute("data-page",e)}}else e.closest(".subscriptions")&&(e.classList.contains("more")?slideDown(all,500):e.classList.contains("reorder")?reorderz():e.classList.contains("refresh")&&getsubscriptions())})}),document.body.addEventListener("click",e=>{let t=e.target;if("li"===t.localName){if(t.closest(".videos"))if(t.classList.contains("active")){if(t.classList.contains("playing"))return!1;document.querySelector(".playing")&&(document.querySelector(".playing").classList.remove("playing"),t.classList.add("playing"))}else{if(video.querySelector(".screen iframe")){if(!window.confirm("Stop current video?"))return!1;{let e=video.querySelector(".screen iframe");e.parentNode.removeChild(e),document.querySelector(".videos .active")&&document.querySelectorAll(".videos .active").forEach(e=>e.classList="li"),t.classList="li active playing",loadvideo(),setTimeout(()=>setactive(),10)}}else document.querySelector(".videos .active")&&document.querySelectorAll(".videos .active").forEach(e=>e.classList="li"),t.classList="li active playing",loadvideo(),setTimeout(()=>setactive(),10),0===video.scrollHeight&&(slideDown(video),setTimeout(()=>{localStorage.pin&&"pin"===localStorage.pin&&window.innerHeight>window.innerWidth&&video.classList.add("pin")},500));video.classList.contains("pin")||zenscroll.toY(0,500)}else if(t.closest(".channels")&&!subscriptions.classList.contains("edit")){if(t.classList.contains("active"))return!1;document.querySelector(".channels .active")&&(document.querySelector(".channels .active").classList="li"),t.classList.add("active"),getlatest("upload"),setTimeout(()=>{if(0===latest.querySelector(".videos").scrollHeight&&latest.querySelector(".h2 .title").click(),window.innerHeight>window.innerWidth){let e=video.classList.contains("pin")?latest.offsetTop-screen.scrollHeight:latest.offsetTop;zenscroll.toY(e,500)}},250),setTimeout(()=>enableautoplay(),750)}}else if("span"===t.localName){if(t.classList.contains("save")){if(t.closest(".latest")){if(saved.querySelector(".videos").innerHTML.includes(t.previousElementSibling.getAttribute("data-id")))return!1;t.title="Remove",saved.querySelector(".videos").insertAdjacentHTML("beforeend",t.closest(".li").outerHTML),setTimeout(()=>t.title="Save")}else{let e=t.closest(".li");e.parentNode.removeChild(e)}enableautoplay(),setTimeout(()=>localStorage.saved=saved.querySelector(".videos").innerHTML,500)}else if(t.classList.contains("star")){let e=t.closest(".li");(t.closest(".favorites")?all:favorites).insertAdjacentHTML("beforeend",e.outerHTML),e.parentNode.removeChild(e)}setactive()}}),nav.querySelector(".refresh").addEventListener("touchstart",()=>{touch=setTimeout(()=>window.location.reload(!0),2e3)},!1),nav.querySelector(".refresh").addEventListener("touchend",()=>clearTimeout(touch),!1),nav.querySelector(".theme").addEventListener("touchstart",()=>{touch=setTimeout(()=>font(),2e3)},!1),nav.querySelector(".theme").addEventListener("touchend",()=>clearTimeout(touch),!1),recalltheme(),"#prefs"===window.location.hash&&prefs.classList.add("active"),prefs.querySelector(".exit").addEventListener("click",()=>prefs.classList.remove("active")),window.addEventListener("resize",()=>{clearTimeout(resizing),resizing=setTimeout(()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()},1e3)}),window.addEventListener("scroll",()=>{window.scrollY+screen.scrollHeight<=latest.offsetTop-5&&newsize()});
